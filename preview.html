<!DOCTYPE html>
<html>

<head>
    <!-- This will grab the most up to date version of the api wrapper -->
   <script src="https://cdn.jsdelivr.net/npm/mg-api-js"></script>
    <script>
        alert('1'); 
     const authentication = {
            credentials: {
                database: 'demo_motive',
                userName: 'waleed.ghous@gomotive.com',
                password: 'Geotab.123'
            },
            path: 'https://mypreview.geotab.com'
        }
        const api = new GeotabApi(authentication);
        console.log('API', api); 

api.getSession(function (credentials, server) {
    alert(2);
    console.log('credentials', credentials);
    api.call("Get", {

        typeName: "User",

        search: {

            name: credentials.userName,

        }

    }, function (result) {
            console.log('result', result);

        // Perform your Business Logic Here

// send the sessionId to your remote server, make a sample API call such as Get Device using this sessionId and if the call is successful, you can authenticate the user on your end.
    
        if (!result || !result.length) {

            var msg = "Could not find user: " + credentials.userName;

            console.log(msg);

        }


    }, function (error) {

        console.log(error);

    });
}, false); 
        
        
    </script>
    <script>
        geotab.addin.myCustomPage1 = () => {

            return {
                initialize(api, state, callback) {
                    callback();
                },
                focus(api, state) {

                },
                blur(api, state) {

                }
            };
        };
    </script>
</head>

<body>
    <!-- <iframe width=100% height=100% referrerpolicy="origin-when-cross-origin" src="https://app.p.k2labs.org/en-US/#/safety/overview"></iframe> -->
</body>

</html>
